function tableWithQuery(a){$("tbody tr").remove(),addHeader();var b=[],c=[];for(var d in tableCols){var e=$("select#"+tableCols[d]).val();c[d]=e}for(var f in _data){var g=_data[f],h=!0;for(var i in tableCols)if(console.log(g[tableCols[i]],c[i]),c[i].length>0&&$.inArray(g[tableCols[i]],c[i])===-1){h=!1;break}h&&b.push(g)}loadList(b)}function loadList(a){for(var b=0;b<a.length;b++)table.find("tbody:last").append(orgToRow(a[b]))}function orgToRow(a){for(var b="<tr>",c=0;c<tableCols.length;c++)col=tableCols[c],b+="<td class="+col+">",b+=a[col],b+="</td>\n";return b}function addHeader(){for(var a="<tr>",b=0;b<tableCols.length;b++)a+="<th>"+tableCols[b]+"</th>";a+="</tr>",table.find("tbody:first").append(a)}function getData(){$.ajax({type:"GET",dataType:"jsonp",url:'https://atlas-9c89c.firebaseio.com/.json?orderBy="organizations"&limitToFirst=20',success:function(a){_data=a,loadFilters(),tableWithQuery("")}})}function loadFilters(){for(var a in tableCols)createFilterFor(tableCols[a]);$(".chosen-select").chosen().change(function(a,b){tableWithQuery($(".filter").val())})}function createFilterFor(a){var b=[];for(var c in _data)$.inArray(_data[c][a],b)===-1&&b.push(_data[c][a]);for(var d='<select id="'+a+'" class="chosen-select" multiple="'+b.length+'">',e=0;e<b.length;e++)d+='<option value="'+b[e]+'">'+b[e]+"</option>";d+="</select>",$("#options").append(d),$("#"+a).chosen({max_selected_options:5,no_results_text:"Oops, nothing found!",width:"90%",allow_single_deselect:!0,placeholder_text_multiple:a})}const table=$("#orgs"),tableCols=["organizations","city","participation"];_data={},$(".filter").keypress(function(a){13==a.which&&tableWithQuery($(this).val())}),getData();